<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Histology Slide Viewer</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
        <style>
            .openseadragon {
                width: 100%; 
                height: 80vh;
                border: 1px solid #888888;
            }
        </style>
    </head>
    <body>
        <div id="app" class="container m-4">
            <h1 class="mb-4">{{ slideName }}</h1>
            <div id="openseadragon" class="openseadragon"></div>
        </div>

        <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/openseadragon/5.0.1/openseadragon.min.js" crossorigin="anonymous"></script>
        <script>
            const { createApp, ref } = Vue

            createApp({
                data() {
                    return {
                        slide: new URLSearchParams(window.location.search).get('resource')
                    }
                },
                computed: {
                    slideName() {
                        return this.slide.replaceAll("_", " ")
                    }
                },
                mounted() {
                    var viewer = OpenSeadragon({
                        id: "openseadragon",
                        prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/5.0.1/images/",
                        tileSources: "slides/" + this.slide + "/" + this.slide + ".dzi"
                    });
                }
            }).mount('#app');
        </script>
    </body>
</html>